const form=document.querySelector(".form-contact"),submit=document.querySelector(".contact-submit"),statusContenair=document.querySelector(".form-status"),statusMessage=document.querySelector(".form-status-message"),inputs=document.querySelectorAll(".form-contact input,textarea");function checkFormData(e){let t=e.get("f-name"),r=e.get("l-name"),s=e.get("mail"),a=e.get("object"),o=e.get("message");console.log(t);let l={dataCheck:!0,errorMessage:"Formulaire envoyé avec succès"};return inputs.forEach(function(e){e.style.borderColor="unset"}),t.length<=0?(l.dataCheck=!1,l.errorMessage="Veuiller remplir le champ 'Prenom'",inputs[0].style.borderColor="red"):r.length<=0?(l.dataCheck=!1,l.errorMessage="Veuiller remplir le champ 'Nom'",inputs[1].style.borderColor="red"):/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(s).toLowerCase())?a.length<=0?(l.dataCheck=!1,l.errorMessage="Veuiller remplir le champ 'Objet'",inputs[3].style.borderColor="red"):o.length<=0&&(l.dataCheck=!1,l.errorMessage="Veuiller remplir le champ 'Message'",inputs[4].style.borderColor="red"):(l.dataCheck=!1,l.errorMessage="Addresse mail non valide",inputs[2].style.borderColor="red"),l}function xhrReturn(e){if(inputs.forEach(function(e){e.style.borderColor="unset"}),statusContenair.style.display="flex",1==e.success)statusMessage.style.color="green",statusMessage.innerHTML="<i class='fas fa-check-circle'></i>"+e.message,inputs.forEach(function(e){e.value=""});else if(0==e.success&&null!=e.failedInput){document.getElementById(e.failedInput).style.borderColor="red"}}submit.addEventListener("click",function(e){e.preventDefault();var t=new FormData(form);if(checkFormData(t).dataCheck){console.log(checkFormData(t));const e=new XMLHttpRequest;e.open("POST","./ressources/php/contact.php",!0),e.onreadystatechange=function(){if(4===e.readyState&&200===e.status){let t=JSON.parse(e.response);xhrReturn(t),console.log(t)}},e.send(t)}else statusMessage.style.color="red",statusMessage.innerHTML="<i class='fas fa-times-circle'></i>"+checkFormData(t).errorMessage,statusContenair.style.display="flex"});